# üöÄ Stream Chat Setup –¥–ª—è Cascais Fishing

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —á–∞—Ç–∞ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö –ø–æ–µ–∑–¥–æ–∫

### üìã –¢—Ä–µ–±—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª `.env.local`:

```bash
# Stream Chat Configuration
NEXT_PUBLIC_STREAM_API_KEY="your_stream_api_key_here"
STREAM_SECRET_KEY="your_stream_secret_key_here"
```

### üîë –ü–æ–ª—É—á–µ–Ω–∏–µ Stream Chat –∫–ª—é—á–µ–π

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ Stream**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Stream.io](https://getstream.io/)
   - –°–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email

2. **–°–æ–∑–¥–∞–π—Ç–µ Chat –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
   - –í Stream Dashboard —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø "Chat"
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω (Europe –¥–ª—è –ü–æ—Ä—Ç—É–≥–∞–ª–∏–∏)

3. **–ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏**
   - –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞–π–¥–∏—Ç–µ:
     - `API Key` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ `NEXT_PUBLIC_STREAM_API_KEY`
     - `Secret Key` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ `STREAM_SECRET_KEY`

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**
   - Permissions ‚Üí Allow user creation: ON
   - Permissions ‚Üí Allow channel creation: ON
   - Authentication ‚Üí Disable Auth checks: OFF (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

1. **–û–±–Ω–æ–≤–∏—Ç–µ .env.local**
```bash
# Stream Chat Configuration
NEXT_PUBLIC_STREAM_API_KEY="YOUR_ACTUAL_API_KEY"
STREAM_SECRET_KEY="YOUR_ACTUAL_SECRET_KEY"
```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**
```bash
npm run dev
```

3. **–û—Ç–∫—Ä–æ–π—Ç–µ –¥–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü—É**
```
http://localhost:3000/chat-demo
```

### üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–∞—Ç–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí [–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è] ‚Üí [Stream Token API] ‚Üí [Chat Client]
                                                    ‚Üì
–ì—Ä—É–ø–ø–æ–≤–∞—è –ø–æ–µ–∑–¥–∫–∞ ‚Üí [Channel Creation API] ‚Üí [Trip Channel]
```

### üìù API Endpoints

- `POST /api/chat/token` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/chat/channels` - –°–æ–∑–¥–∞–Ω–∏–µ/–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–∞–Ω–∞–ª—É –ø–æ–µ–∑–¥–∫–∏
- `GET /api/chat/channels` - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üîß –§—É–Ω–∫—Ü–∏–∏ —á–∞—Ç–∞

#### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** —á–µ—Ä–µ–∑ NextAuth + Stream tokens
- üë• **–ì—Ä—É–ø–ø–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã** –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–µ–∑–¥–∫–∏
- üí¨ **–†–µ–∞–ª-—Ç–∞–π–º —Å–æ–æ–±—â–µ–Ω–∏—è** —Å —Ç–∏–ø–∏–Ω–≥–æ–º –∏ —Ä–µ–∞–∫—Ü–∏—è–º–∏
- üì± **Responsive UI** —Å –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–µ–π/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ–º
- üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –∏ —Å—á–µ—Ç—á–∏–∫–∏ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- üé£ **Trip-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ** –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–¥–∞—Ç–∞, –≤—Ä–µ–º—è, –º–µ—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∏)

#### üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üì∑ –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —É–ª–æ–≤–∞
- üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è —Ç–æ—á–µ–∫ —Ä—ã–±–∞–ª–∫–∏
- üå§Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —á–∞—Ç–∞

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É** (Google OAuth –∏–ª–∏ –¥–µ–º–æ –∞–∫–∫–∞—É–Ω—Ç)
2. **–û—Ç–∫—Ä–æ–π—Ç–µ /chat-demo** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–µ–∑–¥–æ–∫
3. **–ù–∞–∂–º–∏—Ç–µ "–ß–∞—Ç"** –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –ø–æ–µ–∑–¥–∫–µ
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** —Ä–∞–±–æ—Ç—É –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∫–ª–∞–¥–∫–∞—Ö

### üîç –û—Ç–ª–∞–¥–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Stream Chat
console.log('Stream API Key:', process.env.NEXT_PUBLIC_STREAM_API_KEY)

# –õ–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ DevTools:
# ‚úÖ Stream Chat client initialized successfully
# üö¢ Joining trip channel: demo-trip-1
# üîë Generating Stream Chat token for user: user-id
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Stream Dashboard**: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–∞–Ω–∞–ª–æ–≤
- **Browser DevTools**: –õ–æ–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ—à–∏–±–æ–∫
- **Network Tab**: API –≤—ã–∑–æ–≤—ã —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∫–∞–Ω–∞–ª–æ–≤

### üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è UI

Stream Chat –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ª–µ–≥–∫–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä—É—é—Ç—Å—è:

```tsx
// –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
<WithComponents overrides={{ Message: CustomTripMessage }}>
  <MessageList />
</WithComponents>

// –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ç–µ–º–∞
import 'stream-chat-react/dist/css/v2/index.css';
```

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –¢–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—á–∞—Å—Ç–∏—è –≤ –ø–æ–µ–∑–¥–∫–µ –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ —á–∞—Ç—É
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∏—Ä–∏–Ω–≥ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ logout
- ‚úÖ Rate limiting –Ω–∞ API endpoints

### üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚ö° Lazy loading —á–∞—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- üíæ –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- üéØ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è